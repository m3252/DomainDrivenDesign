# 모델과 디자인 패턴의 연결

> 디자인 패턴의 일부 설계 요소는 많은 도메인에서 접하게 되는 일반적인 개념과도 부합하므로 도메인 모델링과 도메인 설계를 아우르는 포괄적인 문맥에도 활용할 수 있다.
>
> 도메인 주도 설계에서 디자인 패턴을 활용하려면 동시에 두 가지 수준에서 패턴을 바라봐야 한다.
> 한 가지 수준은 코드 내에 포함된 기술적인 측면을 다루는 디자인 패턴이고, 다른 수준은 모델 내에 포함된 개념 패턴이다.

> 도메인 계층에서 기술적인 디자인 패턴을 사용할 때는 부가적인 동기 부여와 함께 별도의 의미 계층을 추가함으로써 유용한 구현 기술 이상의 가치를 얻는다.

---

### STRATEGY (전략) <small> 혹은 POLICY (정책)</small>

> 전통적인(기술적인) 관점에서는 각기 다른 알고리즘 간에 상호 대체할 수 이는 능력에 중점을 두는 반면, 도메인 패턴의 관점에서는 프로세스 또는 정책적인 규칙과 같은 하나의 개념을 표현하는 능력에 중점을 둔다.

```JAVA
interface RoutingService { 
    Itinerary findFastest(Spec spec);
    Itinerary findCheapest(Spec spec);
}
```

항로를 계산하는 곳에서 빠른 항로 혹은 가장 저렴한 항로밖에 선택을 못하는 문제가 있다.

STRATEGY 를 사용한다면.. ?

```JAVA
interface RoutingService { 
    Itinerary find(Spec spec, LegMagnitudePolicy legMagnitudePolicy);
}
```

항로 선택 방법을 명확하게 표현할 수 있으며, 매개변수로 전달할 수 있게 되었다.

- [ ] 디자인 패턴 관점
    + RoutingService 의 인터페이스에 새로운 연산이 계속 추가되어 비대해짐을 해결
    + 결합도를 줄어듬
    + 깔끔하고 테스트가 쉬어짐

- [ ] 도메인
    + 근본적으로 중요한 규칙에 해당하는 Itinerary 에 포함될 Leg 를 선택하는 원칙이 명확하고 뚜렷해짐
    + 현행 설게는 잠재적으로 유도된 개별 Leg 의 특정 속성을 바탕으로 항로를 구성한다는 지식을 전달함
  
---

### COMPOSITE (복합체)
> 부분과 전체의 계층을 표현하기 위해 복합 객체를 트리 구조로 만든다. COMPOSITE 패턴을 이용하면 클라이언트가 개별 객체와 복합 객체를 모두 동일하게 다룰 수 있다. 

composite

